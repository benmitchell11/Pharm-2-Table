/**
 * @license
 *-------------------------------------------------------------------------------------------
 * Copyright Â© 2024 Progress Software Corporation. All rights reserved.
 * Licensed under commercial license. See LICENSE.md in the package root for more information
 *-------------------------------------------------------------------------------------------
 */
"use client";"use strict";Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"});const n=require("@progress/kendo-date-math"),l=require("../models/NavigationAction.js"),u=require("../../utils.js"),m=require("../models/SelectionRange.js"),v=[[]],f=4,y=3,V=r=>r>4?-5:r<2?-2:-7,p=r=>r<7?5:r<10?7:2,N={[l.Action.Left]:r=>n.addMonths(r,-1),[l.Action.Up]:r=>n.addMonths(r,V(r.getMonth())),[l.Action.Right]:r=>n.addMonths(r,1),[l.Action.Down]:r=>n.addMonths(r,p(r.getMonth())),[l.Action.PrevView]:r=>n.addYears(r,-1),[l.Action.NextView]:r=>n.addYears(r,1),[l.Action.FirstInView]:r=>n.firstMonthOfYear(r),[l.Action.LastInView]:r=>n.lastMonthOfYear(r)};class L{constructor(e){this._intl=e}addToDate(e,t){return n.addYears(e,t)}datesList(e,t){return u.range(0,t).map(s=>n.addYears(e,s))}data(e){const{cellUID:t,focusedDate:s,isActiveView:c,max:i,min:o,selectedDate:g,selectionRange:h=m.EMPTY_SELECTIONRANGE,viewDate:d}=e;if(!d)return v;const A=this.abbrMonthNames(),Y=n.firstMonthOfYear(d),I=n.lastMonthOfYear(d),w=Y.getFullYear(),F=u.range(0,f),T=u.getToday();return u.range(0,y).map(R=>{const q=n.addMonths(Y,R*f);return F.map(D=>{const a=this.normalize(n.addMonths(q,D),o,i);if(w<a.getFullYear())return null;const E=this.isEqual(a,h.start),S=this.isEqual(a,h.end),M=!E&&!S&&u.isInSelectionRange(a,h),b=c&&(Array.isArray(g)?this.isSelectedFromArray(a,g,o,i):u.isInRange(g,o,i)&&this.isEqual(a,g));return{formattedValue:A[a.getMonth()],id:`${t}${a.getTime()}`,isFocused:this.isEqual(a,s),isSelected:b,isInRange:u.isInRange(a,o,i),isWeekend:!1,isRangeStart:E,isRangeMid:M,isRangeEnd:S,isRangeSplitEnd:M&&this.isEqual(a,I),isRangeSplitStart:M&&this.isEqual(a,Y),isToday:this.isEqual(a,T),title:this.cellTitle(a),value:a}})})}isSelectedFromArray(e,t,s,c){let i=!1;return t.forEach(o=>{u.isInRange(e,s,c)&&this.isEqual(e,o)&&(i=!0)}),i}isEqual(e,t){return!e||!t?!1:e.getFullYear()===t.getFullYear()&&e.getMonth()===t.getMonth()}isInArray(e,t){if(!t.length)return!1;const s=e.getFullYear();return t[0].getFullYear()<=s&&s<=t[t.length-1].getFullYear()}isInRange(e,t,s){const c=n.createDate(e.getFullYear(),e.getMonth(),1),i=!t||n.createDate(t.getFullYear(),t.getMonth(),1)<=c,o=!s||c<=n.createDate(s.getFullYear(),s.getMonth(),1);return i&&o}isInSameView(e,t){return n.durationInYears(e,t)===0}isRangeStart(e){return e.getFullYear()%10===0}move(e,t){const s=N[t];return s?s(e):e}cellTitle(e){return`${e.getFullYear()} ${this.value(e)}`}navigationTitle(e){return this.title(e)}title(e){return e?e.getFullYear().toString():""}rowLength(e){return f}skip(e,t){return n.durationInYears(t,e)}total(e,t){return n.durationInYears(e,t)+1}value(e){return e?this.abbrMonthNames()[e.getMonth()]:""}viewDate(e,t,s=1){return n.durationInYears(e,t)<s?n.addYears(e,-1):e}abbrMonthNames(){return this._intl.dateFormatNames({nameType:"abbreviated",type:"months"})}normalize(e,t,s){return e<t&&this.isEqual(e,t)?n.cloneDate(t):e>s&&this.isEqual(e,s)?n.cloneDate(s):e}}exports.YearViewService=L;
