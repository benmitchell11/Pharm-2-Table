/**
 * @license
 *-------------------------------------------------------------------------------------------
 * Copyright Â© 2024 Progress Software Corporation. All rights reserved.
 * Licensed under commercial license. See LICENSE.md in the package root for more information
 *-------------------------------------------------------------------------------------------
 */
"use client";"use strict";Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"});const g=require("react"),r=require("prop-types"),m=require("@progress/kendo-date-math"),v=require("./CalendarNavigationItem.js"),f=require("../../utils.js"),k=require("../../virtualization/Virtualization.js");function x(p){const a=Object.create(null,{[Symbol.toStringTag]:{value:"Module"}});if(p){for(const i in p)if(i!=="default"){const o=Object.getOwnPropertyDescriptor(p,i);Object.defineProperty(a,i,o.get?o:{enumerable:!0,get:()=>p[i]})}}return a.default=p,Object.freeze(a)}const h=x(g),D=30,c=class c extends h.Component{constructor(a){super(a),this.virtualization=null,this.list=null,this.itemHeight=0,this.topOffset=0,this.maxViewHeight=0,this.bottomOffset=0,this.handleVirtualizationMount=t=>{if(this.virtualization=t,this.virtualization&&this.list){this.list.style.transform=`translateY(${this.topOffset}px)`;const e=f.dateInRange(this.props.focusedDate,this.props.min,this.props.max),s=this.props.service.skip(e,this.props.min);this.virtualization.scrollToIndex(s)}},this.buildNavigationItem=t=>{const e=this.props.service.navigationTitle(t),s=this.props.service.isRangeStart(t),n=`kendo-react-calendar-nav-item-${t.getTime()}`,l={text:e,value:t,isRangeStart:s,view:this.props.activeView,onClick:this.handleDateChange};return this.props.navigationItem?h.createElement(this.props.navigationItem,{...l,key:n},e):h.createElement(v.CalendarNavigationItem,{...l,key:n},e)},this.calculateHeights=()=>{const t=this.props.dom.calendarHeight;this.itemHeight=this.props.dom.navigationItemHeight||1,this.maxViewHeight=this.props.dom.monthViewHeight,this.topOffset=(t-this.itemHeight)/2,this.bottomOffset=t-this.itemHeight},this.handleDateChange=(t,e)=>{const{onChange:s}=this.props;if(s&&e){const n={value:m.cloneDate(t),target:this,nativeEvent:e&&e.nativeEvent,syntheticEvent:e};s.call(void 0,n)}},this.handleScrollAction=({scrollAction:t,pageAction:e})=>{const s=e?e.skip:this.state.skip;if(this.state.skip!==s&&this.setState({skip:s}),this.list&&t){const n=`translateY(${t.offset}px)`;this.list.style.transform=n}},this.lastView=this.props.activeView,this.lastFocus=this.props.focusedDate;const i=this.props.service.skip(this.props.focusedDate,this.props.min),o=this.props.service.total(this.props.min,this.props.max);this.state={skip:i-this.getTake(i,o)>0?i:0}}get take(){return this.props.take!==void 0?this.props.take:c.defaultProps.take}componentDidUpdate(a,i){this.indexToScroll!==void 0&&this.virtualization&&this.virtualization.scrollToIndex(this.indexToScroll),this.lastView=this.props.activeView,this.lastFocus=this.props.focusedDate,this.indexToScroll=void 0}render(){this.calculateHeights();const a=this.lastView!==this.props.activeView,i=f.dateInRange(this.props.focusedDate,this.props.min,this.props.max),o=a?this.props.service.skip(i,this.props.min):this.state.skip,t=this.props.service.total(this.props.min,this.props.max),e=this.getTake(o,t),s=this.props.service.addToDate(this.props.min,o),n=this.props.service.datesList(s,e);(this.props.activeView!==this.lastView||!m.isEqual(i,this.lastFocus))&&(this.indexToScroll=this.props.service.skip(i,this.props.min));const l=h.createElement(k.Virtualization,{skip:o,take:this.take,total:t,itemHeight:this.itemHeight,topOffset:this.topOffset,bottomOffset:this.bottomOffset,onScroll:this.props.onScroll,maxScrollDifference:this.maxViewHeight,onScrollAction:this.handleScrollAction,onMount:this.handleVirtualizationMount,tabIndex:this.props.tabIndex},h.createElement("ul",{ref:u=>{this.list=u},className:"k-reset"},n.map(u=>this.buildNavigationItem(u))));return h.createElement("div",{className:"k-calendar-navigation"},h.createElement("span",{className:"k-calendar-navigation-highlight"}),this.props.dom.didCalculate?l:null)}getTake(a,i){return Math.min(i-a,this.take)}};c.propTypes={activeView:r.number.isRequired,focusedDate:r.instanceOf(Date).isRequired,max:r.instanceOf(Date).isRequired,min:r.instanceOf(Date).isRequired,onChange:r.func,take:r.number,tabIndex:r.number},c.defaultProps={take:D};let d=c;exports.Navigation=d;
