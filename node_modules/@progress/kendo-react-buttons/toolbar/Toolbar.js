/**
 * @license
 *-------------------------------------------------------------------------------------------
 * Copyright Â© 2024 Progress Software Corporation. All rights reserved.
 * Licensed under commercial license. See LICENSE.md in the package root for more information
 *-------------------------------------------------------------------------------------------
 */
"use client";"use strict";Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"});const c=require("react"),i=require("prop-types"),n=require("@progress/kendo-react-common"),u=require("../util.js"),p=require("../package-metadata.js");function b(h){const e=Object.create(null,{[Symbol.toStringTag]:{value:"Module"}});if(h){for(const t in h)if(t!=="default"){const o=Object.getOwnPropertyDescriptor(h,t);Object.defineProperty(e,t,o.get?o:{enumerable:!0,get:()=>h[t]})}}return e.default=h,Object.freeze(e)}const l=b(c),a=class a extends l.Component{constructor(e){super(e),this._element=null,this.offsetHeight=0,this.offsetWidth=0,this.buttons=[],this.focusedSelector=this.selectors.map(t=>t+":focus").join(","),this.setTabIndex=t=>{const{tabIndex:o=a.defaultProps.tabIndex}=this.props;this.buttons.forEach((r,s)=>{r.tabIndex=s===t?o:-1})},this.onKeyDown=t=>{const o=t.target;if(!(t.keyCode===n.Keys.left||t.keyCode===n.Keys.right||t.keyCode===n.Keys.home||t.keyCode===n.Keys.end)||t.defaultPrevented||this.buttons.findIndex(d=>d===o)===-1)return;const s=this.focusedIndex;t.keyCode===n.Keys.left?this.focusButton(s,s===0?this.buttons.length-1:s-1):this.focusButton(s,s===this.buttons.length-1?0:s+1),t.keyCode===n.Keys.home&&this.focusButton(s,0),t.keyCode===n.Keys.end&&this.focusButton(s,this.buttons.length-1)},this.onWindowResize=t=>{const o=this.element;if(!o)return;const r=o.offsetWidth,s=o.offsetHeight;if(this.offsetWidth!==r||this.offsetHeight!==s){this.offsetWidth=r,this.offsetHeight=s;const d={offsetWidth:this.offsetWidth,offsetHeight:this.offsetHeight};this.props.onResize&&this.props.onResize.call(void 0,{target:this,...d,nativeEvent:t})}},n.validatePackage(p.packageMetadata)}get selectors(){return this.props.buttons||u.toolbarButtons}get focusedIndex(){const e=this.element&&this.element.querySelector(this.focusedSelector);return Math.max(0,this.buttons.findIndex(t=>t===e))}get element(){return this._element}componentDidMount(){window.addEventListener("resize",this.onWindowResize);const e=this.element;e&&(this.offsetWidth=e.offsetWidth,this.offsetHeight=e.offsetHeight,this.props.keyboardNavigation!==!1&&(this.buttons=Array.from(e.querySelectorAll(this.selectors.join(","))),this.setTabIndex(0)))}componentDidUpdate(){const e=this.element;!e||this.props.keyboardNavigation===!1||(this.buttons=Array.from(e.querySelectorAll(this.selectors.join(","))),this.setTabIndex(this.focusedIndex))}componentWillUnmount(){window.removeEventListener("resize",this.onWindowResize),this.buttons.length=0}render(){return l.createElement("div",{id:this.props.id,"aria-label":this.props.ariaLabel,className:n.classNames("k-toolbar",{[`k-toolbar-${n.kendoThemeMaps.sizeMap[this.props.size]||this.props.size}`]:this.props.size},this.props.className),style:this.props.style,role:this.props.role!==void 0?this.props.role||void 0:"toolbar",dir:this.props.dir,ref:e=>this._element=e,onKeyDown:this.props.keyboardNavigation!==!1?this.onKeyDown:void 0},this.props.children)}focusButton(e,t){const{tabIndex:o=a.defaultProps.tabIndex}=this.props,r=this.buttons[t];if(r){r.tabIndex=o,r.focus();const s=this.buttons[e];s&&(s.tabIndex=-1)}}};a.propTypes={tabIndex:i.number,dir:i.string,keyboardNavigation:i.bool,style:i.object,className:i.string,role:i.string,onResize:i.func,buttons:i.arrayOf(i.string),size:i.oneOf([null,"small","medium","large"])},a.defaultProps={tabIndex:0,size:"medium"};let f=a;exports.Toolbar=f;
