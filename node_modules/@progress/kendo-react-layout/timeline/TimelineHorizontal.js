/**
 * @license
 *-------------------------------------------------------------------------------------------
 * Copyright Â© 2024 Progress Software Corporation. All rights reserved.
 * Licensed under commercial license. See LICENSE.md in the package root for more information
 *-------------------------------------------------------------------------------------------
 */
"use client";"use strict";Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"});const mt=require("react"),kt=require("prop-types"),bt=require("./TimelineCard.js"),Tt=require("./utils.js"),M=require("@progress/kendo-svg-icons"),gt=require("@progress/kendo-react-intl"),k=require("@progress/kendo-react-common");function vt(l){const p=Object.create(null,{[Symbol.toStringTag]:{value:"Module"}});if(l){for(const T in l)if(T!=="default"){const N=Object.getOwnPropertyDescriptor(l,T);Object.defineProperty(p,T,N.get?N:{enumerable:!0,get:()=>l[T]})}}return p.default=l,Object.freeze(p)}const n=vt(mt),K=l=>{const N=gt.useInternationalization(),[O,X]=n.useState(!1),[D,Y]=n.useState(!0),[B,G]=n.useState(),[f,L]=n.useState(0),[y,J]=n.useState(),[u,Q]=n.useState(0),[b,Z]=n.useState(0),[a,W]=n.useState(1),[d,S]=n.useState(),[i,tt]=n.useState(),[_,U]=n.useState([0,0,0]),[C,P]=n.useState(0),[et,nt]=n.useState(1),m=n.useRef(null),c=n.useRef(null),F=n.useRef(null),{eventsData:st,dateFormat:rt,navigatable:at,onActionClick:ot}=l,x=y?`${y}%`:"150px",g=n.useRef(new k.Navigation({tabIndex:0,root:m,selectors:[".k-timeline-scrollable-wrap"]}));n.useEffect(()=>{m.current&&l.navigatable&&(setTimeout(()=>{const t=g.current.first;t&&t.setAttribute("tabindex",String(0))},0),g.current.keyboardEvents={keydown:{ArrowRight:it,ArrowLeft:lt,End:ft,Home:ut}})},[l.navigatable,a,u]),n.useEffect(()=>{g.current.update()});const ct=t=>{at&&g.current&&g.current.triggerKeyboardEvent(t)};n.useEffect(()=>{var r;const t=k.canUseDOM&&window.ResizeObserver&&new window.ResizeObserver(I),e=c.current,s=((r=m==null?void 0:m.current)==null?void 0:r.offsetWidth)||0;return t&&e&&t.observe(e),V(),I(),U([s,0,-s]),()=>{t&&t.disconnect()}},[]),n.useEffect(()=>{const t=c.current,e=t&&t.children[a];if(e){const s=e.offsetWidth,r=!(f>=0);if(X(r),i){const o=i.length*s>u*s*((f*-1+100)/100);Y(o)}(t==null?void 0:t.offsetWidth)*-f/100>=t.children.length*s&&(V(),I(),L((e.offsetLeft-e.offsetWidth)/(u*e.offsetWidth)*100*-1)),z(e)}},[u,y,a]);const it=(t,e,s)=>{if(c.current){const r=c.current.children[a+1],o=r&&r.classList.contains("k-timeline-flag-wrap")?a+2:a+1;if(i&&i.length<=o)return;u+b<=o&&j(),E(o,s)}},lt=(t,e,s)=>{if(c.current){const r=c.current&&c.current.children[a-1],o=r&&r.classList.contains("k-timeline-flag-wrap")?a-2:a-1;if(o<=0)return;o<b&&$(),E(o,s)}},ut=(t,e,s)=>{if(c.current){if(a<=1)return;const r=1;w(!0,r,0,0),E(r,s)}},ft=(t,e,s)=>{if(c.current){const r=c.current&&c.current.children.length-1;if(r<=a)return;const o=Math.floor(r/u),h=o*-100,R=o*u;w(!0,r,R,h),E(r,s)}},V=()=>{const t=Tt.addYearsFlags(st);tt(t),S([t[a-1],t[a],t[a+1]])},$=()=>{var e;if(c.current&&i){const s=b-u,r=b-1,o=i[r]&&((e=i[r])!=null&&e.yearFlag)?r-1:r,h=f+100>0?0:f+100;w(!1,o,s,h)}},j=()=>{if(c.current&&i){const e=b+u,s=i[e]&&i[e].yearFlag?e+1:e,r=f-100;w(!0,s,e,r)}},w=(t,e,s,r)=>{A(t,e),I(),Z(s),L(r),W(e)},A=(t,e)=>{if(d&&i){const s=v(t,et),r=Object.assign([],d,{[s]:i[e]});S(r),nt(s),P(t?-100:100),setTimeout(()=>{var q;const o=(q=m.current)==null?void 0:q.offsetWidth,h=Object.assign([],_,{[s]:0,[v(!0,s)]:o,[v(!1,s)]:o&&-o}),R=Object.assign([],r,{[v(!0,s)]:{},[v(!1,s)]:{}});S(R),U(h),P(0)},l.transitionDuration||300)}},v=(t,e)=>{const s=t?e+1:e-1;return d?s<0?d.length-1:s%d.length:0},z=t=>{var s;const e=(a-b)*t.offsetWidth+t.offsetWidth/2+(((s=F.current)==null?void 0:s.offsetWidth)||0);G(e)},E=(t,e)=>{e.preventDefault(),t>a?A(!0,t):t<a&&A(!1,t),W(t)},I=n.useCallback(()=>{const t=c.current,e=t&&t.children[a];if(t instanceof HTMLElement&&e){const s=Math.round(t.offsetWidth/150);z(e),J(100/s),Q(s)}},[]),dt=()=>({transitionDuration:"300ms"}),H=t=>({transform:`translateX(${t}%)`,transformOrigin:"left top"});return n.createElement(n.Fragment,null,n.createElement("div",{className:"k-timeline-track-wrap",ref:m,onKeyDown:ct},n.createElement("button",{ref:F,"aria-hidden":"true",onClick:()=>O&&$(),className:k.classNames("k-timeline-arrow","k-timeline-arrow-left","k-button k-button-md k-rounded-md k-button-solid k-button-solid-base k-icon-button",{"k-disabled":!O})},n.createElement(k.SvgIcon,{icon:M.caretAltLeftIcon})),n.createElement("button",{"aria-hidden":"true",onClick:()=>D&&j(),className:k.classNames("k-timeline-arrow","k-timeline-arrow-right","k-button k-button-md k-rounded-md k-button-solid k-button-solid-base k-icon-button",{"k-disabled":!D})},n.createElement(k.SvgIcon,{icon:M.caretAltRightIcon})),n.createElement("div",{className:"k-timeline-track"},n.createElement("ul",{ref:c,className:"k-timeline-scrollable-wrap",role:"tablist",tabIndex:0,style:{transform:`translateX(${f}%)`}},i&&i.map((t,e)=>t.yearFlag?n.createElement("li",{role:"none",className:"k-timeline-track-item k-timeline-flag-wrap",style:{flex:`1 0 ${x}`},key:e},n.createElement("span",{className:"k-timeline-flag"},t.yearFlag)):n.createElement("li",{role:"tab",className:k.classNames("k-timeline-track-item",{"k-focus":e===a}),"aria-selected":e===a,style:{flex:`1 0 ${x}`},key:e},n.createElement("div",{className:"k-timeline-date-wrap"},n.createElement("span",{className:"k-timeline-date"},N.formatDate(t.date,rt))),n.createElement("span",{onClick:s=>E(e,s),className:"k-timeline-circle"})))))),n.createElement("div",{className:"k-timeline-events-list"},n.createElement("ul",{className:"k-timeline-scrollable-wrap",style:C===0?{...H(C)}:{...H(C),...dt()}},d&&d.map((t,e)=>n.createElement("li",{key:e,className:"k-timeline-event",style:{transform:`translate3d(${_[e]}px, 0px, 0px)`}},t&&n.createElement(bt.TimelineCard,{tabindex:_[e]===0?0:-1,eventData:t,onActionClick:ot,horizontal:!0,collapsible:!1,calloutStyle:{left:`${B}px`}}))))))};K.propTypes={onActionClick:kt.func};exports.TimelineHorizontal=K;
