/**
 * @license
 *-------------------------------------------------------------------------------------------
 * Copyright Â© 2024 Progress Software Corporation. All rights reserved.
 * Licensed under commercial license. See LICENSE.md in the package root for more information
 *-------------------------------------------------------------------------------------------
 */
"use client";"use strict";Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"});const N=require("react"),m=require("prop-types"),C=require("@progress/kendo-react-animation"),b=require("@progress/kendo-react-common"),x=require("../package-metadata.js"),E=require("./ActionSheetItem.js"),g=require("./ActionSheetHeader.js"),D=require("./ActionSheetFooter.js"),I=require("./ActionSheetContent.js");function O(h){const n=Object.create(null,{[Symbol.toStringTag]:{value:"Module"}});if(h){for(const t in h)if(t!=="default"){const i=Object.getOwnPropertyDescriptor(h,t);Object.defineProperty(n,t,i.get?i:{enumerable:!0,get:()=>h[t]})}}return n.default=h,Object.freeze(n)}const e=O(N),d=class d extends e.Component{constructor(n){super(n),this.actionSheetRef=e.createRef(),this.actionSheetTitleClass="k-actionsheet-title",this.ariaLabeledBy=this.actionSheetTitleClass+1,this.animationDuration=300,this.bottomPosition={bottom:"0",width:"100%"},this.handleKeyDown=t=>{this.props.navigatable&&this.navigation.triggerKeyboardEvent(t)},this.onTab=(t,i,s)=>{s.preventDefault(),s.shiftKey?i.focusPrevious(t):i.focusNext(t)},this.handleOverlayClick=t=>{this.props.onOverlayClick&&this.props.onOverlayClick.call(void 0,t),this.props.onClose&&this.props.onClose.call(void 0,t),this.props.animation||this.hideActionSheet()},this.handleItemClick=t=>{this.props.onItemClick&&this.props.onItemClick.call(void 0,t),this.props.onItemSelect&&this.props.onItemSelect.call(void 0,t),this.props.animation||this.hideActionSheet()},this.onEnter=(t,i,s)=>{if(t.ariaDisabled)return;const c=t.className&&t.className.indexOf?t.className.indexOf("k-actionsheet-item")!==-1:!1,l=i.elements.filter(a=>a.className.indexOf("k-actionsheet-item")!==-1);if(c&&this.props.onItemClick){s.preventDefault();const a=this.props.items[l.indexOf(t)];this.props.onItemClick.call(void 0,{syntheticEvent:s,item:a,title:a&&a.title})}if(c&&this.props.onItemSelect){s.preventDefault();const a=this.props.items[l.indexOf(t)];this.props.onItemSelect.call(void 0,{syntheticEvent:s,item:a,title:a&&a.title})}this.props.animation||this.hideActionSheet()},this.onEscape=(t,i,s)=>{this.props.onOverlayClick&&(s.preventDefault(),this.props.onOverlayClick.call(void 0,s)),this.props.onClose&&(s.preventDefault(),this.props.onClose.call(void 0,s)),this.props.animation||this.hideActionSheet()},this.hideActionSheet=()=>{this.setState({show:!1})},this.children=t=>{const i={};return e.Children.forEach(t,s=>{s&&(i[s.type.displayName]=s)}),i},this.state={show:!1,slide:!1},b.validatePackage(x.packageMetadata)}componentDidMount(){this.props.expand&&!this.state.show&&this.setState({show:!0})}componentDidUpdate(n,t){const i=this.actionSheetRef.current;if(this.props.expand&&!this.state.show&&this.setState({show:!0}),this.props.expand&&this.state.show&&!this.state.slide&&this.setState({slide:!0}),!this.props.expand&&this.state.show&&this.state.slide&&this.setState({slide:!1}),t!==this.state&&this.state.slide&&i&&!this.props.className&&(i.style.setProperty("--kendo-actionsheet-height","auto"),i.style.setProperty("--kendo-actionsheet-max-height","none")),i&&this.props.navigatable){const c=[".k-actionsheet-item",...[".k-actionsheet-footer",".k-actionsheet-content",".k-actionsheet-titlebar"].map(l=>b.FOCUSABLE_ELEMENTS.concat(this.props.navigatableElements).map(a=>`${l} ${a}`)).flat()];this.navigation=new b.Navigation({tabIndex:this.props.tabIndex||0,root:this.actionSheetRef,rovingTabIndex:!1,selectors:c,keyboardEvents:{keydown:{Tab:this.onTab,Enter:this.onEnter,Escape:this.onEscape}}}),this.navigation.focusElement(this.navigation.first,null)}}render(){const{title:n,subTitle:t,animationStyles:i,animation:s,expand:c,tabIndex:l,items:a}=this.props,r=a==null?void 0:a.filter(o=>!o.group||o.group==="top"),u=a==null?void 0:a.filter(o=>o.group==="bottom"),S=r&&r.length>0&&u&&u.length>0,f=this.children(this.props.children),y=this.props.animationDuration||this.animationDuration,v=this.state.slide&&e.createElement("div",{className:b.classNames("k-actionsheet",this.props.className,{"k-actionsheet-bottom":!this.props.className}),role:"dialog","aria-modal":"true","aria-hidden":!1,"aria-labelledby":this.ariaLabeledBy,ref:this.actionSheetRef,onKeyDown:this.handleKeyDown},f[g.headerDisplayName]&&!n&&!t&&f[g.headerDisplayName],(n||t)&&e.createElement("div",{className:"k-actionsheet-titlebar k-text-center"},e.createElement("div",{className:"k-actionsheet-titlebar-group k-hbox"},e.createElement("div",{className:this.actionSheetTitleClass,id:this.ariaLabeledBy},n&&e.createElement("div",null,n),t&&e.createElement("div",{className:"k-actionsheet-subtitle"},t)))),f[I.contentDisplayName]||e.createElement("div",{className:"k-actionsheet-content"},e.createElement("div",{className:"k-list-ul",role:"group"},r&&r.map((o,p)=>e.createElement(E.ActionSheetItem,{...o,id:p,key:p,item:o,tabIndex:l||0,onClick:this.handleItemClick}))),S&&e.createElement("hr",{className:"k-hr"}),e.createElement("div",{className:"k-list-ul",role:"group"},u&&u.map((o,p)=>e.createElement(E.ActionSheetItem,{...o,id:p+((r==null?void 0:r.length)||0),key:p,item:o,tabIndex:l||0,onClick:this.handleItemClick})))),f[D.footerDisplayName]);return e.createElement(e.Fragment,null,c||this.state.show?e.createElement(e.Fragment,null,e.createElement("div",{className:"k-actionsheet-container"},e.createElement("div",{className:"k-overlay",onClick:this.handleOverlayClick}),s?e.createElement(C.Animation,{transitionName:this.state.slide?"slide-up":"slide-down",onExited:this.hideActionSheet,transitionEnterDuration:y,transitionExitDuration:y,animationEnteringStyle:i||this.bottomPosition,animationEnteredStyle:i||this.bottomPosition,animationExitingStyle:i||this.bottomPosition,exit:!0,enter:!0,appear:!1},v):v)):null)}};d.displayName="KendoReactActionSheet",d.propTypes={items:m.array,subTitle:m.string,title:m.string,navigatable:m.bool,navigatableElements:m.array},d.defaultProps={navigatable:!0,navigatableElements:[]};let k=d;exports.ActionSheet=k;
