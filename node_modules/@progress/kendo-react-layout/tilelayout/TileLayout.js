/**
 * @license
 *-------------------------------------------------------------------------------------------
 * Copyright Â© 2024 Progress Software Corporation. All rights reserved.
 * Licensed under commercial license. See LICENSE.md in the package root for more information
 *-------------------------------------------------------------------------------------------
 */
"use client";"use strict";Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"});const S=require("react"),t=require("prop-types"),u=require("@progress/kendo-react-common"),N=require("./InternalTile.js"),k=require("../package-metadata.js");function O(d){const n=Object.create(null,{[Symbol.toStringTag]:{value:"Module"}});if(d){for(const a in d)if(a!=="default"){const s=Object.getOwnPropertyDescriptor(d,a);Object.defineProperty(n,a,s.get?s:{enumerable:!0,get:()=>d[a]})}}return n.default=d,Object.freeze(n)}const i=O(S),j={column:"k-grid-flow-col",row:"k-grid-flow-row","column dense":"k-grid-flow-col-dense","row dense":"k-grid-flow-row-dense",unset:"k-grid-flow-unset"},f=class f extends i.Component{constructor(n){super(n),this._element=null,this.state={positions:(this.props.items||[]).map((a,s)=>Object.assign({order:s,rowSpan:1,colSpan:1},a.defaultPosition))},this.showLicenseWatermark=!1,this.focus=()=>{this._element&&this._element.focus()},this.update=(a,s,o,l=0,h=0)=>{if(s===0&&o===0&&!h&&!l)return;let c=!1;const m=this.state.positions.map(y=>Object.assign({},y)),r=m[a],g=m.find(y=>y.order===r.order+s);g&&g!==r&&(r.order+=s,g.order+=-s,c=!0);const e=r.col+o;o!==0&&e>=1&&e+r.colSpan<=(this.props.columns||3)+1&&(r.col=e,c=!0);const p=r.colSpan+h;h&&p>=1&&p+r.col<=(this.props.columns||3)+1&&(r.colSpan=p,c=!0);const w=r.rowSpan+l;l&&w>=1&&(r.rowSpan=w,c=!0),c&&(this.setState({positions:m}),u.dispatchEvent(this.props.onReposition,{},this,{value:m}))},u.validatePackage(k.packageMetadata),this.showLicenseWatermark=u.shouldShowValidationUI(k.packageMetadata)}get element(){return this._element}static getDerivedStateFromProps(n,a){return n.positions?{positions:n.positions.map((s,o)=>Object.assign({order:o,rowSpan:1,colSpan:1},s))}:n.items&&(!a.positions||n.items.length!==a.positions.length)?{positions:n.items.map((s,o)=>Object.assign({order:o,rowSpan:1,colSpan:1},s.defaultPosition))}:null}render(){const{className:n,columns:a=3,columnWidth:s="1fr",gap:o,rowHeight:l="1fr",style:h,autoFlow:c="column",items:m=[]}=this.props,r=o?`${typeof o.rows=="number"?o.rows+"px":o.rows} ${typeof o.columns=="number"?o.columns+"px":o.columns}`:16,g={gridTemplateColumns:`repeat(${a}, minmax(0px, ${typeof s=="number"?s+"px":s}))`,gridAutoRows:`minmax(0px, ${typeof l=="number"?l+"px":l})`,gap:r,padding:r,...h};return i.createElement("div",{ref:e=>{this._element=e},dir:this.props.dir,className:u.classNames("k-tilelayout k-pos-relative",j[c],n),style:g,id:this.props.id,children:m.map((e,p)=>i.createElement(i.Fragment,{key:this.props.dataItemKey?u.getter(this.props.dataItemKey)(e):p},i.createElement(N.InternalTile,{update:this.update,defaultPosition:this.state.positions[p],index:p,resizable:e.resizable,reorderable:e.reorderable,style:e.style,className:e.className,hintClassName:e.hintClassName,hintStyle:e.hintStyle,ignoreDrag:this.props.ignoreDrag},e.item?e.item:i.createElement(i.Fragment,null,i.createElement("div",{className:"k-tilelayout-item-header k-card-header"},i.isValidElement(e.header)?e.header:i.createElement("h5",{className:"k-card-title"},e.header)),i.createElement("div",{className:"k-tilelayout-item-body k-card-body"},e.body))),this.showLicenseWatermark&&i.createElement(u.WatermarkOverlay,null)))})}};f.propTypes={id:t.string,style:t.object,className:t.string,dir:t.string,gap:t.object,columns:t.number,columnWidth:t.oneOfType([t.number,t.string]),rowHeight:t.oneOfType([t.number,t.string]),dataItemKey:t.string,items:t.array,positions:t.array,autoFlow:t.oneOf(["column","row","column dense","row dense","unset"]),onReposition:t.func,ignoreDrag:t.func},f.displayName="KendoTileLayout";let b=f;exports.TileLayout=b;
